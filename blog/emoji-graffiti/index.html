<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://www.praguevara.dev/ name=base><title>praguevara • Emoji Graffiti</title><link href="https://www.praguevara.dev/inter_subset_en.css?h=d8cf4ad058d6c3a4015b" rel=stylesheet><link href="https://www.praguevara.dev/main.css?h=2e02623b98889ce02fac" rel=stylesheet><meta content="light dark" name=color-scheme><meta content="praguevara's personal site" name=description><meta content="praguevara's personal site" property=og:description><meta content="index, nofollow" name=robots><meta content="Emoji Graffiti" property=og:title><meta content=article property=og:type><meta content=en_GB property=og:locale><meta content=https://www.praguevara.dev/blog/emoji-graffiti/ property=og:url><meta content=praguevara property=og:site_name><meta content="default-src 'self';font-src 'self' data:;img-src 'self' https://* data:;media-src 'self';style-src 'self';frame-src player.vimeo.com https://www.youtube-nocookie.com;connect-src 'self' *.umami.dev analytics.eu.umami.is;script-src 'self' analytics.eu.umami.is 'self'" http-equiv=Content-Security-Policy><noscript><link href=https://www.praguevara.dev/no_js.css rel=stylesheet></noscript><script src=https://www.praguevara.dev/js/initializeTheme.min.js></script><script defer src=https://www.praguevara.dev/js/themeSwitcher.min.js></script><script async data-do-not-track=true data-website-id=0c7e37b7-63ab-4bb1-8569-f3539cca7a85 defer src=https://analytics.eu.umami.is/script.js></script><body><header><nav class=navbar><div class=nav-title><a class=home-title href=https://www.praguevara.dev>praguevara</a></div><div class=nav-navs><ul><li><a class="nav-links no-hover-padding" href=https://www.praguevara.dev/blog/> blog </a><li><a class="nav-links no-hover-padding" href=https://www.praguevara.dev/cv> cv </a><li><a class="nav-links no-hover-padding" href=https://www.praguevara.dev/about> about </a><li><a class="nav-links no-hover-padding" href=https://www.praguevara.dev/archive/> archive </a><li class="theme-switcher-wrapper js"><div aria-label="Toggle dark mode" title="Toggle dark/light mode" aria-pressed=false class=theme-switcher role=button tabindex=0></div><div aria-label="Reset mode to default" class="theme-resetter arrow" title="Reset mode to default" aria-hidden=true role=button tabindex=0></div></ul></div></nav></header><div class=content><main><article><h1 class=article-title>Emoji Graffiti</h1><ul class=meta><li>15th Sep 2024</li> • <li title="882 words">5 min read</li> • <li>Tags: <li><a href=https://www.praguevara.dev/tags/elixir/>elixir</a>, <li><a href=https://www.praguevara.dev/tags/phoenix/>phoenix</a></ul><section class=body><p>Since a friend told me in his company they were using Elixir, I decided to give it a try. I had heard it was a functional programming language, and although it's weakly typed, I thought it would be a good language to learn.<p>Around the same time, the website <a href=https://onemillioncheckboxes.com/>One Million Checkboxes</a> was getting popular, so I took some inspiration from it as well as Reddit Place to create <a href=https://emoji.praguevara.dev/>Emoji Graffiti</a>.<p>It's basically a grid of emoji that you can edit. When you click on a cell, it lets you choose an emoji and replace the one that was there. The changes are automatically propagated to all connected clients, and the state is saved to a PostgreSQL database.<p>I shared the link on reddit and a few hundred people joined and starting graffitiing. I was surprised with the low quantity of phallic drawings (2) as well as the lack of vandalism in general. There were also a few works of art, such as a double helix crab structure that spanned for a few thousand rows, or a <em>Hail Satan</em> graffiti.<p><img alt=Screenshot src=https://www.praguevara.dev/blog/emoji-graffiti/./screenshot.png><h2 id=the-technology><a aria-label="Anchor link for: the-technology" class="header-anchor no-hover-padding" href=#the-technology><span aria-hidden=true class=link-icon></span></a> The technology</h2><p>The site is deployed on <a href=https://fly.io/>Fly.io</a> and the source code is available on <a href=https://github.com/praguevara/emoji-graffiti>GitHub</a>.<p>Emoji Graffiti is built using Elixir and the Phoenix framework, which provides a robust foundation for real-time web applications. Here's a breakdown of the key technologies and components:<ol><li><p><strong>Elixir and Phoenix</strong>: The core of the application is written in Elixir, utilizing the Phoenix framework for web development. Phoenix's LiveView feature is particularly useful for creating interactive, real-time experiences without writing complex JavaScript.</p><li><p><strong>PostgreSQL</strong>: The application uses PostgreSQL as its database to store the emoji grid state. This is configured in the <code>config/dev.exs</code> file.</p></ol><pre class="language-elixir z-code" data-lang=elixir><code class=language-elixir data-lang=elixir><span class="z-source z-elixir">config <span class="z-constant z-other z-symbol z-elixir"><span class="z-punctuation z-definition z-constant z-elixir">:</span>emoji_graffiti</span><span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-entity z-name z-class z-elixir">EmojiGraffiti</span><span class="z-punctuation z-separator z-method z-elixir">.</span><span class="z-entity z-name z-class z-elixir">Repo</span><span class="z-punctuation z-separator z-object z-elixir">,</span>
</span><span class="z-source z-elixir">  <span class="z-constant z-other z-keywords z-elixir">username<span class="z-punctuation z-definition z-constant z-elixir">:</span></span> <span class="z-entity z-name z-class z-elixir">System</span><span class="z-punctuation z-separator z-method z-elixir">.</span>get_env<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-meta z-string z-elixir"><span class="z-string z-quoted z-double z-elixir"><span class="z-punctuation z-definition z-string z-begin z-elixir">"</span>DB_USERNAME<span class="z-punctuation z-definition z-string z-end z-elixir">"</span></span></span><span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-meta z-string z-elixir"><span class="z-string z-quoted z-double z-elixir"><span class="z-punctuation z-definition z-string z-begin z-elixir">"</span>postgres<span class="z-punctuation z-definition z-string z-end z-elixir">"</span></span></span><span class="z-punctuation z-section z-function z-elixir">)</span><span class="z-punctuation z-separator z-object z-elixir">,</span>
</span><span class="z-source z-elixir">  <span class="z-constant z-other z-keywords z-elixir">password<span class="z-punctuation z-definition z-constant z-elixir">:</span></span> <span class="z-entity z-name z-class z-elixir">System</span><span class="z-punctuation z-separator z-method z-elixir">.</span>get_env<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-meta z-string z-elixir"><span class="z-string z-quoted z-double z-elixir"><span class="z-punctuation z-definition z-string z-begin z-elixir">"</span>DB_PASS<span class="z-punctuation z-definition z-string z-end z-elixir">"</span></span></span><span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-meta z-string z-elixir"><span class="z-string z-quoted z-double z-elixir"><span class="z-punctuation z-definition z-string z-begin z-elixir">"</span>postgres<span class="z-punctuation z-definition z-string z-end z-elixir">"</span></span></span><span class="z-punctuation z-section z-function z-elixir">)</span><span class="z-punctuation z-separator z-object z-elixir">,</span>
</span><span class="z-source z-elixir">  <span class="z-constant z-other z-keywords z-elixir">hostname<span class="z-punctuation z-definition z-constant z-elixir">:</span></span> <span class="z-entity z-name z-class z-elixir">System</span><span class="z-punctuation z-separator z-method z-elixir">.</span>get_env<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-meta z-string z-elixir"><span class="z-string z-quoted z-double z-elixir"><span class="z-punctuation z-definition z-string z-begin z-elixir">"</span>DB_HOST<span class="z-punctuation z-definition z-string z-end z-elixir">"</span></span></span><span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-meta z-string z-elixir"><span class="z-string z-quoted z-double z-elixir"><span class="z-punctuation z-definition z-string z-begin z-elixir">"</span>localhost<span class="z-punctuation z-definition z-string z-end z-elixir">"</span></span></span><span class="z-punctuation z-section z-function z-elixir">)</span><span class="z-punctuation z-separator z-object z-elixir">,</span>
</span><span class="z-source z-elixir">  <span class="z-constant z-other z-keywords z-elixir">database<span class="z-punctuation z-definition z-constant z-elixir">:</span></span> <span class="z-entity z-name z-class z-elixir">System</span><span class="z-punctuation z-separator z-method z-elixir">.</span>get_env<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-meta z-string z-elixir"><span class="z-string z-quoted z-double z-elixir"><span class="z-punctuation z-definition z-string z-begin z-elixir">"</span>DB<span class="z-punctuation z-definition z-string z-end z-elixir">"</span></span></span><span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-meta z-string z-elixir"><span class="z-string z-quoted z-double z-elixir"><span class="z-punctuation z-definition z-string z-begin z-elixir">"</span>emoji_graffiti<span class="z-punctuation z-definition z-string z-end z-elixir">"</span></span></span><span class="z-punctuation z-section z-function z-elixir">)</span><span class="z-punctuation z-separator z-object z-elixir">,</span>
</span><span class="z-source z-elixir">  <span class="z-constant z-other z-keywords z-elixir">stacktrace<span class="z-punctuation z-definition z-constant z-elixir">:</span></span> <span class="z-constant z-language z-elixir">true</span><span class="z-punctuation z-separator z-object z-elixir">,</span>
</span><span class="z-source z-elixir">  <span class="z-constant z-other z-keywords z-elixir">show_sensitive_data_on_connection_error<span class="z-punctuation z-definition z-constant z-elixir">:</span></span> <span class="z-constant z-language z-elixir">true</span><span class="z-punctuation z-separator z-object z-elixir">,</span>
</span><span class="z-source z-elixir">  <span class="z-constant z-other z-keywords z-elixir">pool_size<span class="z-punctuation z-definition z-constant z-elixir">:</span></span> <span class="z-constant z-numeric z-elixir">10</span>
</span></code></pre><ol start=3><li><strong>Docker Compose</strong>: For local development and testing, I used Docker Compose to set up a PostgreSQL database. This made it easy to create a consistent development environment across different machines. Here's a snippet from the <code>docker-compose.yml</code> file:</ol><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">db</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">postgres</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">environment</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">POSTGRES_USER=postgres</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">POSTGRES_PASSWORD=postgres</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">ports</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">"</span>5432:5432<span class="z-punctuation z-definition z-string z-end z-yaml">"</span></span>
</span></code></pre><ol start=4><li><strong>Nix</strong>: To ensure a consistent development environment, I used Nix with a <code>flake.nix</code> configuration. This allowed me to specify all the necessary dependencies and tools:</ol><pre class="language-nix z-code" data-lang=nix><code class=language-nix data-lang=nix><span class="z-source z-nix"><span class="z-punctuation z-definition z-attrset-or-function z-nix">{</span>
</span><span class="z-source z-nix">  <span class="z-entity z-other z-attribute-name z-multipart z-nix">description</span> <span class="z-keyword z-operator z-bind z-nix">=</span> <span class="z-string z-quoted z-double z-nix"><span class="z-punctuation z-definition z-string z-double z-start z-nix">"</span>A flake for building development environment of Phoenix project.<span class="z-punctuation z-definition z-string z-double z-end z-nix">"</span></span><span class="z-punctuation z-terminator z-bind z-nix">;</span>
</span><span class="z-source z-nix">
</span><span class="z-source z-nix">  <span class="z-entity z-other z-attribute-name z-multipart z-nix">inputs</span> <span class="z-keyword z-operator z-bind z-nix">=</span> <span class="z-punctuation z-definition z-attrset-or-function z-nix">{</span>
</span><span class="z-source z-nix">    <span class="z-entity z-other z-attribute-name z-multipart z-nix">nixpkgs</span>.<span class="z-entity z-other z-attribute-name z-multipart z-nix">url</span> <span class="z-keyword z-operator z-bind z-nix">=</span> <span class="z-string z-quoted z-double z-nix"><span class="z-punctuation z-definition z-string z-double z-start z-nix">"</span>github:NixOS/nixpkgs/master<span class="z-punctuation z-definition z-string z-double z-end z-nix">"</span></span><span class="z-punctuation z-terminator z-bind z-nix">;</span>
</span><span class="z-source z-nix">    <span class="z-entity z-other z-attribute-name z-multipart z-nix">flake-utils</span>.<span class="z-entity z-other z-attribute-name z-multipart z-nix">url</span> <span class="z-keyword z-operator z-bind z-nix">=</span> <span class="z-string z-quoted z-double z-nix"><span class="z-punctuation z-definition z-string z-double z-start z-nix">"</span>github:numtide/flake-utils<span class="z-punctuation z-definition z-string z-double z-end z-nix">"</span></span><span class="z-punctuation z-terminator z-bind z-nix">;</span>
</span><span class="z-source z-nix">  <span class="z-punctuation z-definition z-attrset z-nix">}</span><span class="z-punctuation z-terminator z-bind z-nix">;</span>
</span><span class="z-source z-nix">
</span><span class="z-source z-nix">  <span class="z-entity z-other z-attribute-name z-multipart z-nix">outputs</span> <span class="z-keyword z-operator z-bind z-nix">=</span> <span class="z-punctuation z-definition z-entity z-function z-2 z-nix">{</span> <span class="z-variable z-parameter z-function z-1 z-nix">self</span><span class="z-keyword z-operator z-nix">,</span> <span class="z-variable z-parameter z-function z-1 z-nix">nixpkgs</span><span class="z-keyword z-operator z-nix">,</span> <span class="z-variable z-parameter z-function z-1 z-nix">flake-utils</span> <span class="z-punctuation z-definition z-entity z-function z-nix">}</span><span class="z-punctuation z-definition z-function z-nix">:</span>
</span><span class="z-source z-nix">    <span class="z-variable z-parameter z-name z-nix">flake-utils</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">lib</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">eachDefaultSystem</span> <span class="z-punctuation z-definition z-expression z-nix">(</span><span class="z-variable z-parameter z-function z-4 z-nix">system</span><span class="z-punctuation z-definition z-function z-nix">:</span>
</span><span class="z-source z-nix">      <span class="z-keyword z-other z-nix">let</span>
</span><span class="z-source z-nix">        <span class="z-entity z-other z-attribute-name z-multipart z-nix">pkgs</span> <span class="z-keyword z-operator z-bind z-nix">=</span> <span class="z-variable z-parameter z-name z-nix">nixpkgs</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">legacyPackages</span><span class="z-keyword z-operator z-nix">.</span><span class="z-markup z-italic"><span class="z-punctuation z-section z-embedded z-begin z-nix">${</span><span class="z-variable z-parameter z-name z-nix">system</span><span class="z-punctuation z-section z-embedded z-end z-nix">}</span></span><span class="z-punctuation z-terminator z-bind z-nix">;</span>
</span><span class="z-source z-nix">      <span class="z-keyword z-other z-nix">in</span>
</span><span class="z-source z-nix">      <span class="z-keyword z-other z-nix">with</span> <span class="z-variable z-parameter z-name z-nix">pkgs</span>; <span class="z-punctuation z-definition z-attrset-or-function z-nix">{</span>
</span><span class="z-source z-nix">        <span class="z-entity z-other z-attribute-name z-multipart z-nix">devShells</span>.<span class="z-entity z-other z-attribute-name z-multipart z-nix">default</span> <span class="z-keyword z-operator z-bind z-nix">=</span> <span class="z-variable z-parameter z-name z-nix">mkShell</span> <span class="z-punctuation z-definition z-attrset-or-function z-nix">{</span>
</span><span class="z-source z-nix">          <span class="z-entity z-other z-attribute-name z-multipart z-nix">buildInputs</span> <span class="z-keyword z-operator z-bind z-nix">=</span> <span class="z-punctuation z-definition z-list z-nix">[</span>
</span><span class="z-source z-nix">            <span class="z-variable z-parameter z-name z-nix">beam</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">packages</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">erlang_24</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">elixir_1_16</span>
</span><span class="z-source z-nix">            <span class="z-variable z-parameter z-name z-nix">elixir-ls</span>
</span><span class="z-source z-nix">            <span class="z-variable z-parameter z-name z-nix">tailwindcss-language-server</span>
</span><span class="z-source z-nix">            <span class="z-variable z-parameter z-name z-nix">vscode-langservers-extracted</span>
</span><span class="z-source z-nix">            <span class="z-variable z-parameter z-name z-nix">nodePackages</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">typescript-language-server</span>
</span><span class="z-source z-nix">            <span class="z-variable z-parameter z-name z-nix">pkgs</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">nodePackages</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">prettier</span>
</span><span class="z-source z-nix">            <span class="z-variable z-parameter z-name z-nix">tailwindcss</span>
</span><span class="z-source z-nix">            <span class="z-variable z-parameter z-name z-nix">nodejs</span>
</span><span class="z-source z-nix">            <span class="z-variable z-parameter z-name z-nix">docker-compose</span>
</span><span class="z-source z-nix">            <span class="z-variable z-parameter z-name z-nix">flyctl</span>
</span><span class="z-source z-nix">          <span class="z-punctuation z-definition z-list z-nix">]</span> <span class="z-keyword z-operator z-nix">++</span> <span class="z-variable z-parameter z-name z-nix">lib</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">optionals</span> <span class="z-variable z-parameter z-name z-nix">stdenv</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">isLinux</span> <span class="z-punctuation z-definition z-list z-nix">[</span>
</span><span class="z-source z-nix">            <span class="z-variable z-parameter z-name z-nix">libnotify</span>
</span><span class="z-source z-nix">            <span class="z-variable z-parameter z-name z-nix">inotify-tools</span>
</span><span class="z-source z-nix">          <span class="z-punctuation z-definition z-list z-nix">]</span> <span class="z-keyword z-operator z-nix">++</span> <span class="z-variable z-parameter z-name z-nix">lib</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">optionals</span> <span class="z-variable z-parameter z-name z-nix">stdenv</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">isDarwin</span> <span class="z-punctuation z-definition z-list z-nix">[</span>
</span><span class="z-source z-nix">            <span class="z-variable z-parameter z-name z-nix">terminal-notifier</span>
</span><span class="z-source z-nix">            <span class="z-variable z-parameter z-name z-nix">darwin</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">apple_sdk</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">frameworks</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">CoreFoundation</span>
</span><span class="z-source z-nix">            <span class="z-variable z-parameter z-name z-nix">darwin</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">apple_sdk</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">frameworks</span><span class="z-keyword z-operator z-nix">.</span><span class="z-variable z-parameter z-name z-nix">CoreServices</span>
</span><span class="z-source z-nix">          <span class="z-punctuation z-definition z-list z-nix">]</span><span class="z-punctuation z-terminator z-bind z-nix">;</span>
</span><span class="z-source z-nix">        <span class="z-punctuation z-definition z-attrset z-nix">}</span><span class="z-punctuation z-terminator z-bind z-nix">;</span>
</span><span class="z-source z-nix">      <span class="z-punctuation z-definition z-attrset z-nix">}</span>
</span><span class="z-source z-nix">    <span class="z-punctuation z-definition z-expression z-nix">)</span><span class="z-punctuation z-terminator z-bind z-nix">;</span>
</span><span class="z-source z-nix"><span class="z-punctuation z-definition z-attrset z-nix">}</span>
</span></code></pre><ol start=5><li><strong>GenServer</strong>: The <code>EmojiGraffiti.Wall</code> module uses Elixir's GenServer to manage the state of the emoji grid. This allows for efficient handling of concurrent updates and queries:</ol><pre class="language-elixir z-code" data-lang=elixir><code class=language-elixir data-lang=elixir><span class="z-source z-elixir"><span class="z-meta z-module z-elixir"><span class="z-keyword z-control z-module z-elixir">defmodule</span> <span class="z-entity z-name z-class z-elixir">EmojiGraffiti</span>.<span class="z-entity z-name z-class z-elixir">Wall</span> <span class="z-keyword z-control z-module z-elixir">do</span></span>
</span><span class="z-source z-elixir">  <span class="z-keyword z-control z-elixir">use</span> <span class="z-entity z-name z-class z-elixir">GenServer</span>
</span><span class="z-source z-elixir">  <span class="z-keyword z-control z-elixir">import</span> <span class="z-entity z-name z-class z-elixir">Ecto</span><span class="z-punctuation z-separator z-method z-elixir">.</span><span class="z-entity z-name z-class z-elixir">Query</span>
</span><span class="z-source z-elixir">  <span class="z-keyword z-control z-elixir">alias</span> <span class="z-entity z-name z-class z-elixir">EmojiGraffiti</span><span class="z-punctuation z-separator z-method z-elixir">.</span><span class="z-entity z-name z-class z-elixir">Repo</span>
</span><span class="z-source z-elixir">  <span class="z-keyword z-control z-elixir">alias</span> <span class="z-entity z-name z-class z-elixir">EmojiGraffiti</span><span class="z-punctuation z-separator z-method z-elixir">.</span><span class="z-entity z-name z-class z-elixir">Cell</span>
</span><span class="z-source z-elixir">
</span><span class="z-source z-elixir">  <span class="z-keyword z-control z-elixir">require</span> <span class="z-entity z-name z-class z-elixir">Logger</span>
</span><span class="z-source z-elixir">
</span><span class="z-source z-elixir">  <span class="z-variable z-other z-module z-elixir"><span class="z-keyword z-operator z-definition z-constant z-elixir">@</span>max_count</span> <span class="z-constant z-numeric z-elixir">100_000</span> <span class="z-keyword z-operator z-arithmetic z-elixir">-</span> <span class="z-constant z-numeric z-elixir">1</span>
</span><span class="z-source z-elixir">
</span><span class="z-source z-elixir"><span class="z-meta z-function z-elixir">  <span class="z-keyword z-control z-module z-elixir">def</span> <span class="z-entity z-name z-function z-public z-elixir">start_link</span><span class="z-punctuation z-definition z-parameters z-elixir">(</span>_init_arg<span class="z-punctuation z-section z-function z-elixir">)</span> <span class="z-keyword z-control z-module z-elixir">do</span></span>
</span><span class="z-source z-elixir">    <span class="z-entity z-name z-class z-elixir">GenServer</span><span class="z-punctuation z-separator z-method z-elixir">.</span>start_link<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-variable z-language z-elixir">__MODULE__</span><span class="z-punctuation z-separator z-object z-elixir">,</span> %<span class="z-meta z-sequence z-tuple z-elixir"><span class="z-punctuation z-section z-sequence z-begin z-elixir">{</span><span class="z-punctuation z-section z-sequence z-end z-elixir">}</span></span><span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-constant z-other z-keywords z-elixir">name<span class="z-punctuation z-definition z-constant z-elixir">:</span></span> <span class="z-variable z-language z-elixir">__MODULE__</span><span class="z-punctuation z-section z-function z-elixir">)</span>
</span><span class="z-source z-elixir">  <span class="z-keyword z-control z-elixir">end</span>
</span><span class="z-source z-elixir">
</span><span class="z-source z-elixir"><span class="z-meta z-function z-elixir">  <span class="z-keyword z-control z-module z-elixir">def</span> <span class="z-entity z-name z-function z-public z-elixir">get</span><span class="z-punctuation z-definition z-parameters z-elixir">(</span>id<span class="z-punctuation z-section z-function z-elixir">)</span> <span class="z-keyword z-operator z-elixir">when</span> id <span class="z-keyword z-operator z-comparison z-elixir">>=</span> <span class="z-constant z-numeric z-elixir">0</span> <span class="z-keyword z-operator z-logical z-elixir">and</span> id <span class="z-keyword z-operator z-comparison z-elixir"><=</span> <span class="z-variable z-other z-module z-elixir"><span class="z-keyword z-operator z-definition z-constant z-elixir">@</span>max_count</span> <span class="z-keyword z-control z-module z-elixir">do</span></span>
</span><span class="z-source z-elixir">    <span class="z-entity z-name z-class z-elixir">GenServer</span><span class="z-punctuation z-separator z-method z-elixir">.</span>call<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-variable z-language z-elixir">__MODULE__</span><span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-meta z-sequence z-tuple z-elixir"><span class="z-punctuation z-section z-sequence z-begin z-elixir">{</span><span class="z-constant z-other z-symbol z-elixir"><span class="z-punctuation z-definition z-constant z-elixir">:</span>get</span><span class="z-punctuation z-separator z-sequence z-elixir">,</span> id<span class="z-punctuation z-section z-sequence z-end z-elixir">}</span></span><span class="z-punctuation z-section z-function z-elixir">)</span>
</span><span class="z-source z-elixir">  <span class="z-keyword z-control z-elixir">end</span>
</span><span class="z-source z-elixir">
</span></code></pre><ol start=6><li><strong>LiveView</strong>: The <code>EmojiGraffitiWeb.WallLive</code> module implements the LiveView functionality, handling real-time updates and user interactions:</ol><pre class="language-elixir z-code" data-lang=elixir><code class=language-elixir data-lang=elixir><span class="z-source z-elixir"><span class="z-meta z-module z-elixir"><span class="z-keyword z-control z-module z-elixir">defmodule</span> <span class="z-entity z-name z-class z-elixir">EmojiGraffitiWeb</span>.<span class="z-entity z-name z-class z-elixir">WallLive</span> <span class="z-keyword z-control z-module z-elixir">do</span></span>
</span><span class="z-source z-elixir">  <span class="z-keyword z-control z-elixir">use</span> <span class="z-entity z-name z-class z-elixir">Phoenix</span><span class="z-punctuation z-separator z-method z-elixir">.</span><span class="z-entity z-name z-class z-elixir">LiveView</span>
</span><span class="z-source z-elixir">
</span><span class="z-source z-elixir">  <span class="z-keyword z-control z-elixir">alias</span> <span class="z-entity z-name z-class z-elixir">EmojiGraffiti</span><span class="z-punctuation z-separator z-method z-elixir">.</span><span class="z-entity z-name z-class z-elixir">Wall</span>
</span><span class="z-source z-elixir">  <span class="z-keyword z-control z-elixir">alias</span> <span class="z-entity z-name z-class z-elixir">EmojiGraffiti</span><span class="z-punctuation z-separator z-method z-elixir">.</span><span class="z-entity z-name z-class z-elixir">Validator</span>
</span><span class="z-source z-elixir">
</span><span class="z-source z-elixir">  <span class="z-variable z-other z-module z-elixir"><span class="z-keyword z-operator z-definition z-constant z-elixir">@</span>column_size</span> <span class="z-constant z-numeric z-elixir">12</span>
</span><span class="z-source z-elixir">  <span class="z-variable z-other z-module z-elixir"><span class="z-keyword z-operator z-definition z-constant z-elixir">@</span>chunk_size</span> <span class="z-constant z-numeric z-elixir">300</span> <span class="z-keyword z-operator z-arithmetic z-elixir">*</span> <span class="z-variable z-other z-module z-elixir"><span class="z-keyword z-operator z-definition z-constant z-elixir">@</span>column_size</span>
</span><span class="z-source z-elixir">
</span><span class="z-source z-elixir">  <span class="z-keyword z-control z-elixir">import</span> <span class="z-entity z-name z-class z-elixir">EmojiGraffitiWeb</span><span class="z-punctuation z-separator z-method z-elixir">.</span><span class="z-entity z-name z-class z-elixir">CellComponent</span><span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-constant z-other z-keywords z-elixir">only<span class="z-punctuation z-definition z-constant z-elixir">:</span></span> <span class="z-punctuation z-section z-array z-elixir">[</span><span class="z-constant z-other z-keywords z-elixir">cell<span class="z-punctuation z-definition z-constant z-elixir">:</span></span> <span class="z-constant z-numeric z-elixir">1</span><span class="z-punctuation z-section z-array z-elixir">]</span>
</span><span class="z-source z-elixir">
</span><span class="z-source z-elixir"><span class="z-meta z-function z-elixir">  <span class="z-keyword z-control z-module z-elixir">def</span> <span class="z-entity z-name z-function z-public z-elixir">mount</span><span class="z-punctuation z-definition z-parameters z-elixir">(</span>_params<span class="z-punctuation z-separator z-object z-elixir">,</span> _session<span class="z-punctuation z-separator z-object z-elixir">,</span> socket<span class="z-punctuation z-section z-function z-elixir">)</span> <span class="z-keyword z-control z-module z-elixir">do</span></span>
</span><span class="z-source z-elixir">    <span class="z-keyword z-control z-elixir">if</span> connected?<span class="z-punctuation z-section z-function z-elixir">(</span>socket<span class="z-punctuation z-section z-function z-elixir">)</span> <span class="z-keyword z-control z-elixir">do</span>
</span><span class="z-source z-elixir">      <span class="z-entity z-name z-class z-elixir">Phoenix</span><span class="z-punctuation z-separator z-method z-elixir">.</span><span class="z-entity z-name z-class z-elixir">PubSub</span><span class="z-punctuation z-separator z-method z-elixir">.</span>subscribe<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-entity z-name z-class z-elixir">EmojiGraffiti</span><span class="z-punctuation z-separator z-method z-elixir">.</span><span class="z-entity z-name z-class z-elixir">PubSub</span><span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-meta z-string z-elixir"><span class="z-string z-quoted z-double z-elixir"><span class="z-punctuation z-definition z-string z-begin z-elixir">"</span>emoji_updates<span class="z-punctuation z-definition z-string z-end z-elixir">"</span></span></span><span class="z-punctuation z-section z-function z-elixir">)</span>
</span><span class="z-source z-elixir">    <span class="z-keyword z-control z-elixir">end</span>
</span><span class="z-source z-elixir">
</span><span class="z-source z-elixir">    emojis <span class="z-keyword z-operator z-assignment z-elixir">=</span> <span class="z-entity z-name z-class z-elixir">Wall</span><span class="z-punctuation z-separator z-method z-elixir">.</span>get_many<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-constant z-numeric z-elixir">0</span><span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-variable z-other z-module z-elixir"><span class="z-keyword z-operator z-definition z-constant z-elixir">@</span>chunk_size</span> <span class="z-keyword z-operator z-arithmetic z-elixir">-</span> <span class="z-constant z-numeric z-elixir">1</span><span class="z-punctuation z-section z-function z-elixir">)</span>
</span><span class="z-source z-elixir">    rows <span class="z-keyword z-operator z-assignment z-elixir">=</span> group_emojis_into_rows<span class="z-punctuation z-section z-function z-elixir">(</span>emojis<span class="z-punctuation z-section z-function z-elixir">)</span>
</span><span class="z-source z-elixir">
</span><span class="z-source z-elixir">    socket <span class="z-keyword z-operator z-assignment z-elixir">=</span>
</span><span class="z-source z-elixir">      socket
</span><span class="z-source z-elixir">      <span class="z-keyword z-operator z-pipe z-elixir">|></span> assign<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-constant z-other z-symbol z-elixir"><span class="z-punctuation z-definition z-constant z-elixir">:</span>start</span><span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-variable z-other z-module z-elixir"><span class="z-keyword z-operator z-definition z-constant z-elixir">@</span>chunk_size</span><span class="z-punctuation z-section z-function z-elixir">)</span>
</span><span class="z-source z-elixir">      <span class="z-keyword z-operator z-pipe z-elixir">|></span> stream<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-constant z-other z-symbol z-elixir"><span class="z-punctuation z-definition z-constant z-elixir">:</span>rows</span><span class="z-punctuation z-separator z-object z-elixir">,</span> rows<span class="z-punctuation z-section z-function z-elixir">)</span>
</span><span class="z-source z-elixir">
</span><span class="z-source z-elixir">    <span class="z-meta z-sequence z-tuple z-elixir"><span class="z-punctuation z-section z-sequence z-begin z-elixir">{</span><span class="z-constant z-other z-symbol z-elixir"><span class="z-punctuation z-definition z-constant z-elixir">:</span>ok</span><span class="z-punctuation z-separator z-sequence z-elixir">,</span> socket<span class="z-punctuation z-section z-sequence z-end z-elixir">}</span></span>
</span><span class="z-source z-elixir">  <span class="z-keyword z-control z-elixir">end</span>
</span><span class="z-source z-elixir">
</span></code></pre><ol start=7><li><strong>PubSub</strong>: Phoenix's PubSub system is used to broadcast emoji updates to all connected clients:</ol><pre class="language-elixir z-code" data-lang=elixir><code class=language-elixir data-lang=elixir><span class="z-source z-elixir"><span class="z-entity z-name z-class z-elixir">Phoenix</span><span class="z-punctuation z-separator z-method z-elixir">.</span><span class="z-entity z-name z-class z-elixir">PubSub</span><span class="z-punctuation z-separator z-method z-elixir">.</span>broadcast<span class="z-punctuation z-section z-function z-elixir">(</span>
</span><span class="z-source z-elixir">  <span class="z-entity z-name z-class z-elixir">EmojiGraffiti</span><span class="z-punctuation z-separator z-method z-elixir">.</span><span class="z-entity z-name z-class z-elixir">PubSub</span><span class="z-punctuation z-separator z-object z-elixir">,</span>
</span><span class="z-source z-elixir">  <span class="z-meta z-string z-elixir"><span class="z-string z-quoted z-double z-elixir"><span class="z-punctuation z-definition z-string z-begin z-elixir">"</span>emoji_updates<span class="z-punctuation z-definition z-string z-end z-elixir">"</span></span></span><span class="z-punctuation z-separator z-object z-elixir">,</span>
</span><span class="z-source z-elixir">  <span class="z-meta z-sequence z-tuple z-elixir"><span class="z-punctuation z-section z-sequence z-begin z-elixir">{</span><span class="z-constant z-other z-symbol z-elixir"><span class="z-punctuation z-definition z-constant z-elixir">:</span>emoji_changed</span><span class="z-punctuation z-separator z-sequence z-elixir">,</span> id<span class="z-punctuation z-separator z-sequence z-elixir">,</span> emoji<span class="z-punctuation z-section z-sequence z-end z-elixir">}</span></span>
</span><span class="z-source z-elixir"><span class="z-punctuation z-section z-function z-elixir">)</span>
</span></code></pre><ol start=8><li><strong>Emoji Picker</strong>: The application uses the life-saving <a href=https://nolanlawson.github.io/emoji-picker-element>emoji-picker-element</a> library for the emoji selection interface:</ol><pre class="language-typescript z-code" data-lang=typescript><code class=language-typescript data-lang=typescript><span class="z-source z-ts"><span class="z-meta z-import z-ts"><span class="z-keyword z-control z-import z-ts">import</span> <span class="z-meta z-block z-ts"><span class="z-punctuation z-definition z-block z-ts">{</span> <span class="z-variable z-other z-readwrite z-alias z-ts">Picker</span> <span class="z-punctuation z-definition z-block z-ts">}</span></span> <span class="z-keyword z-control z-from z-ts">from</span> <span class="z-string z-quoted z-double z-ts"><span class="z-punctuation z-definition z-string z-begin z-ts">"</span>../vendor/emoji-picker-element<span class="z-punctuation z-definition z-string z-end z-ts">"</span></span></span>
</span></code></pre><ol start=9><li><strong>Tailwind CSS</strong>: The UI is styled using Tailwind CSS, as evident from the class names in the HTML templates:</ol><pre class="language-html z-code" data-lang=html><code class=language-html data-lang=html><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">flex</span> <span class="z-meta z-class-name z-html">flex-col</span> <span class="z-meta z-class-name z-html">h-svh</span> <span class="z-meta z-class-name z-html">overflow-hidden</span> <span class="z-meta z-class-name z-html">bg-purple-50</span> <span class="z-meta z-class-name z-html">bg-opacity-15</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span> <span class="z-meta z-attribute-with-value z-id z-html"><span class="z-entity z-other z-attribute-name z-id z-html">id</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-toc-list z-id z-html">emoji-container</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">flex-grow</span> <span class="z-meta z-class-name z-html">overflow-auto</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span> <span class="z-meta z-attribute-with-value z-id z-html"><span class="z-entity z-other z-attribute-name z-id z-html">id</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-toc-list z-id z-html">scrollable-content</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">    <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">flex</span> <span class="z-meta z-class-name z-html">justify-center</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">      <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">flex</span> <span class="z-meta z-class-name z-html">flex-col</span> <span class="z-meta z-class-name z-html">items-center</span> <span class="z-meta z-class-name z-html">text-xl</span> <span class="z-meta z-class-name z-html">mt-6</span> <span class="z-meta z-class-name z-html">mb-2</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">        <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">h1</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">text-1xl</span> <span class="z-meta z-class-name z-html">text-center</span> <span class="z-meta z-class-name z-html">mx-8</span> <span class="z-meta z-class-name z-html">text-purple-900</span> <span class="z-meta z-class-name z-html">font-semibold</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">          100 000 emoji
</span><span class="z-text z-html z-basic">        <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">h1</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">        <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">h3</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">text-xs</span> <span class="z-meta z-class-name z-html">opacity-75</span> <span class="z-meta z-class-name z-html">text-purple-700</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">          by <span class="z-meta z-tag z-inline z-a z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-inline z-a z-html">a</span> <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">href</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span>https://github.com/praguevara<span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span> <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">target</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span>_blank<span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>@praguevara<span class="z-meta z-tag z-inline z-a z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-inline z-a z-html">a</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">        <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">h3</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">      <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">    <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">    <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">relative</span> <span class="z-meta z-class-name z-html">max-w-screen-lg</span> <span class="z-meta z-class-name z-html">mx-auto</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">      <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span> <span class="z-meta z-attribute-with-value z-id z-html"><span class="z-entity z-other z-attribute-name z-id z-html">id</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-toc-list z-id z-html">emoji-grid</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span> <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">phx-hook</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span>EmojiGrid<span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">grid</span> <span class="z-meta z-class-name z-html">px-4</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span> <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">phx-update</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span>stream<span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">
</span></code></pre><ol start=10><li><strong>Deployment</strong>: The application is deployed on Fly.io, which provides an easy-to-use platform for hosting Elixir applications.</ol><pre class="language-toml z-code" data-lang=toml><code class=language-toml data-lang=toml><span class="z-source z-toml"><span class="z-comment z-line z-number-sign z-toml"><span class="z-punctuation z-definition z-comment z-toml">#</span> fly.toml app configuration file generated for emoji-graffiti on 2024-08-20T12:48:26+02:00</span>
</span><span class="z-source z-toml"><span class="z-comment z-line z-number-sign z-toml"><span class="z-punctuation z-definition z-comment z-toml">#</span></span>
</span><span class="z-source z-toml"><span class="z-comment z-line z-number-sign z-toml"><span class="z-punctuation z-definition z-comment z-toml">#</span> See https://fly.io/docs/reference/configuration/ for information about how to use this file.</span>
</span><span class="z-source z-toml"><span class="z-comment z-line z-number-sign z-toml"><span class="z-punctuation z-definition z-comment z-toml">#</span></span>
</span><span class="z-source z-toml">
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">app</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-single z-literal z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">'</span>emoji-graffiti<span class="z-punctuation z-definition z-string z-end z-toml">'</span></span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">primary_region</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-single z-literal z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">'</span>mad<span class="z-punctuation z-definition z-string z-end z-toml">'</span></span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">kill_signal</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-single z-literal z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">'</span>SIGTERM<span class="z-punctuation z-definition z-string z-end z-toml">'</span></span>
</span><span class="z-source z-toml">
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">build</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml">
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">deploy</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml">  <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">release_command</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-single z-literal z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">'</span>/app/bin/migrate<span class="z-punctuation z-definition z-string z-end z-toml">'</span></span>
</span><span class="z-source z-toml">
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">env</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml">  <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">PHX_HOST</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-single z-literal z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">'</span>emoji.praguevara.dev<span class="z-punctuation z-definition z-string z-end z-toml">'</span></span>
</span><span class="z-source z-toml">  <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">PORT</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-single z-literal z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">'</span>8080<span class="z-punctuation z-definition z-string z-end z-toml">'</span></span>
</span><span class="z-source z-toml">
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">http_service</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml">  <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">internal_port</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-numeric z-integer z-toml">8080</span>
</span><span class="z-source z-toml">  <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">force_https</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-language z-toml">true</span>
</span><span class="z-source z-toml">  <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">auto_stop_machines</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-single z-literal z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">'</span>stop<span class="z-punctuation z-definition z-string z-end z-toml">'</span></span>
</span><span class="z-source z-toml">  <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">auto_start_machines</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-language z-toml">true</span>
</span><span class="z-source z-toml">  <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">min_machines_running</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-numeric z-integer z-toml">0</span>
</span><span class="z-source z-toml">  <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">processes</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-single z-literal z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">'</span>app<span class="z-punctuation z-definition z-string z-end z-toml">'</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span>
</span><span class="z-source z-toml">
</span><span class="z-source z-toml">  <span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">http_service</span><span class="z-punctuation z-separator z-table z-toml">.</span><span class="z-entity z-name z-table z-toml">concurrency</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml">    <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">type</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-single z-literal z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">'</span>connections<span class="z-punctuation z-definition z-string z-end z-toml">'</span></span>
</span><span class="z-source z-toml">    <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">hard_limit</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-numeric z-integer z-toml">1000</span>
</span><span class="z-source z-toml">    <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">soft_limit</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-numeric z-integer z-toml">1000</span>
</span><span class="z-source z-toml">
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-array z-begin z-toml">[[</span><span class="z-meta z-tag z-table z-array z-toml"><span class="z-entity z-name z-table z-toml">vm</span></span><span class="z-punctuation z-definition z-table z-array z-end z-toml">]]</span>
</span><span class="z-source z-toml">  <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">memory</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-single z-literal z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">'</span>1gb<span class="z-punctuation z-definition z-string z-end z-toml">'</span></span>
</span><span class="z-source z-toml">  <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">cpu_kind</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-single z-literal z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">'</span>shared<span class="z-punctuation z-definition z-string z-end z-toml">'</span></span>
</span><span class="z-source z-toml">  <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">cpus</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-numeric z-integer z-toml">1</span>
</span><span class="z-source z-toml">
</span></code></pre></section><nav class="full-width article-navigation"><div><a aria-describedby=left_title aria-label=Next href=https://www.praguevara.dev/blog/website-nix/><span class=arrow>←</span> Next</a><p aria-hidden=true id=left_title>How I build my website</div><div><a aria-describedby=right_title aria-label=Prev href=https://www.praguevara.dev/blog/ultimate-chinese-deck/>Prev <span class=arrow>→</span></a><p aria-hidden=true id=right_title>My Anki Chinese Deck</div></nav></article></main><span class=hidden id=copy-success> Copied! </span><span class=hidden id=copy-init> Copy code to clipboard </span><script defer src=https://www.praguevara.dev/js/copyCodeToClipboard.min.js></script></div><footer><section><nav class="socials nav-navs"><ul><li><a class="nav-links no-hover-padding social" rel=" me" href=https://github.com/praguevara/> <img alt=github loading=lazy src=https://www.praguevara.dev/social_icons/github.svg title=github> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://x.com/praguevara> <img alt=x loading=lazy src=https://www.praguevara.dev/social_icons/x.svg title=x> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://www.linkedin.com/in/pablo-ram%C3%B3n-guevara-498283165/> <img alt=linkedin loading=lazy src=https://www.praguevara.dev/social_icons/linkedin.svg title=linkedin> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=/pgp.txt> <img alt=pgp loading=lazy src=https://www.praguevara.dev/social_icons/key.svg title=pgp> </a></ul></nav><nav class=nav-navs></nav><div class=credits><small> Powered by <a href=https://www.getzola.org>Zola</a> & <a href=https://github.com/welpo/tabi>tabi</a> </small></div></section></footer>